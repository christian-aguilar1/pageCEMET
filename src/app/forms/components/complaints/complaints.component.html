<div class="container-fluid noticiasHead">
    <div class="container-fluid">
        <h1 class="h1Head">Reclamos</h1>
    </div>
</div>

<div class="container-fluid container-form">
  <p>
    Aquí podrás hacer tus reclamos hacia la Institución ya sean malas practicas o comportamientos irregulares o mal intencionados
    de profesores, ayudantes y compañeros
    <br>
    El formulario puede ser llenado de forma anónima si quien denuncia no desea dar a conocer su identidad.
  </p>
  <hr>
  <form [formGroup]="form" class="form-group needs-validation" (ngSubmit)="sendEmail(form.value)" novalidate>
    <div class="form-group has-validation">
      <label for="name">Nombre (opcional)</label>
      <input id="name" type="name" formControlName="name" class="form-control" placeholder="Nombre y apellido" [ngClass]="{ 'is-invalid': clicked && f['name'].errors}">
      <div *ngIf="clicked && f['name'].errors" class="invalid-feedback">
        <div *ngIf="f['name'].errors['minlength']">Por favor, ingresa tu nombre y apellido</div>
        <div *ngIf="f['name'].errors['emailRequired']">Por favor, si ingresaste tu nombre ingresa también tu correo</div>
      </div>
    </div>
    <div class="form-group has-validation">
      <label for="email">Correo Electrónico (opcional)</label>
      <input id="email" type="email" formControlName="email" class="form-control" placeholder="ejemplo@usach.cl" [ngClass]="{ 'is-invalid': clicked && f['email'].errors}">
      <div *ngIf="clicked && f['email'].errors" class="invalid-feedback">
        <div *ngIf="f['email'].errors['pattern']">Por favor, ingresa un Email correcto</div>
        <div *ngIf="f['email'].errors['nameRequired']">Por favor, si ingresaste tu correo ingresa también tu nombre</div>
      </div>
    </div>
    <div class="form-group has-validation">
      <label for="blamedName">Nombre Denunciado *</label>
      <input id="blamedName" type="name" formControlName="blamedName" class="form-control" placeholder="Nombre y apellido" [ngClass]="{ 'is-invalid': clicked && f['blamedName'].errors}">
      <div *ngIf="clicked && f['blamedName'].errors" class="invalid-feedback">
        <div *ngIf="f['blamedName'].errors['minlength']">Por favor, ingresa el nombre y apellido del denunciado</div>
        <div *ngIf="f['blamedName'].errors['required']">El nombre del denunciado es obligatorio</div>
      </div>
    </div>
    <div class="form-group">
      <label for="message">Situación *</label>
      <textarea id="message" formControlName="message" class="form-control form-control-lg" placeholder="Mensaje" [ngClass]="{ 'is-invalid': clicked && f['message'].errors}"></textarea>
      <div *ngIf="clicked && f['message'].errors" class="invalid-feedback">
        <div *ngIf="f['message'].errors['required']">Por favor, ingresa un Mensaje</div>
        <div *ngIf="f['message'].errors['minlength']">El mensaje tiene que ser de mínimo 20 caracteres</div>
      </div>
    </div>
    <button type="submit" class="btn btn-primary btn-lg">
      <div *ngIf="!submitted && !isLoading">
        Enviar
      </div>
      <div *ngIf="submitted && isLoading">
          <span class="spinner-border spinner-border-sm mr-2"></span>
          Enviando datos...
      </div>
      <div *ngIf="submitted && !isLoading" class="container-success">
        <div>
          <img src="assets/icons/check.png" alt="success" class="icon-check">
        </div>
        <div>
          Enviado!
        </div>
      </div>
    </button>
  </form>
</div>
